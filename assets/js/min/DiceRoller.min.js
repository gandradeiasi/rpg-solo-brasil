class DiceRoller{static roll(dice_amount,dice_max,dice_modifier){let result={dice_max:dice_max,results:[],modifier:dice_modifier,total:0};for(let i=0;i<dice_amount;i++)result.results.push(parseInt(Math.random()*dice_max)+1),result.total+=result.results[i];return result.total+=parseInt(dice_modifier),result}static formataSoma(result){const modifier_sign=result.modifier?result.modifier<0?"-":"+":null;result.modifier="-"==modifier_sign?-1*result.modifier:result.modifier;const modifier_format=`${result.modifier?` ${modifier_sign} ${result.modifier}`:""}`;return`<strong>Rolando ${result.results.length}d${result.dice_max}${modifier_format}:</strong> ${DiceRoller.formataDices(result," + ")}${modifier_format}${DiceRoller.mostraSufixo(result)?` || Soma = ${result.total}`:""}`}static formataVantagem(result){return`<strong>Rolando ${result.results.length}d${result.dice_max}:</strong> ${DiceRoller.formataDices(result,", ")}${DiceRoller.mostraSufixo(result)?` || Maior = ${result.results.reduce((x,y)=>y>x?y:x,0)}`:""}`}static formataDesvantagem(result){return`<strong>Rolando ${result.results.length}d${result.dice_max}:</strong> ${DiceRoller.formataDices(result,", ")}${DiceRoller.mostraSufixo(result)?` || Menor = ${result.results.reduce((x,y)=>y<x?y:x,result.results[0])}`:""}`}static mostraSufixo(result){return result.results.length>1||result.modifier}static formataDices(result,separator){let dices="";return result.results.forEach((x,n)=>{dices+=x,n<result.results.length-1&&(dices+=separator)}),`[${dices}]`}static infoFromParam(param){const roll_info=DiceRoller.regex.exec(param),dice_amount=roll_info[1]?roll_info[1]:1,dice_max=roll_info[2],sign=roll_info[3]?"+"==roll_info[3][0]?1:-1:1,modifier=roll_info[4]?roll_info[4]*sign:0;return{dice_amount:dice_amount,dice_max:dice_max,modifier:modifier}}static regex=/([0-9]*)d([0-9]+)([+-]*)([0-9]*)/}